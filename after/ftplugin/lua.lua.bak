local lspconfig = require("lspconfig")

if lspconfig.lua_ls then
  lspconfig.lua_ls.setup({
    settings = {
      Lua = {
        diagnostics = {
          -- This is the Lua table for diagnostics settings
          globals = { "vim", "use", "_G", "packer_plugins", "P" },
          disable = {
            "undefined-global",
            "lowercase-global",
            "unused-local",
            "unused-vararg",
            "trailing-space"
          },
        },
        workspace = {
          -- Points the language server to Neovim's runtime files for auto-completion
          library = {
            --vim.api.nvim_get_runtime_path(),
            --checkThirdParty = false,
            vim.env.VIMRUNTIME,
            -- Depending on the usage, you might want to add additional paths here.
            "${3rd}/luv/library",
            "${3rd}/busted/library",
          },
        },
        telemetry = {
          enable = false,
        },
      },
    },
  })
end
